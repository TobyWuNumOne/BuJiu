<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>揪團 - 參與頁</title>
    <link rel="stylesheet" href="./css/index.css">
    <link <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">
    <div class="container py-4">
        <h1 class="mb-4 text-center" id="group-title">揪團</h1>

        <div class="row mb-4">
            <div class="col-sm-6 col-xs-12 mb-3 text-center">
                <h5>菜單</h5>
                <img src="" id="menu-image" class="img-fluid rounded shadow-sm" alt="菜單">
            </div>
            <div class="col-sm-6 col-xs-12 mb-3 text-center">
                <h5>收款 QR Code</h5>
                <img src="" id="qr-image" class="img-fluid rounded shadow-sm" alt="QR Code">
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header">我要填單</div>
            <div class="card-body">
                <form id="order-form">
                    <div class="row mb-3">
                        <div class="col">
                            <label for="name" class="form-label">你的名字</label>
                            <input type="text" class="form-control" id="name" required>
                        </div>
                        <div class="col">
                            <label for="item" class="form-label">購買項目</label>
                            <input type="text" class="form-control" id="item" required>
                        </div>
                        <div class="col">
                            <label for="price" class="form-label">金額</label>
                            <input type="number" class="form-control" id="price" required min="1">
                        </div>
                        <div class="col">
                            <label for="note" class="form-label">備註</label>
                            <input type="text" class="form-control" id="note" placeholder="備註">
                        </div>
                    </div>
                    <div class="d-flex flex-row-reverse mt-2">

                        <button type="submit" class="btn btn-primary">送出</button>
                    </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">目前已填單</div>
            <ul class="list-group list-group-flush" id="order-list">
                <!-- JS 渲染 -->
            </ul>
        </div>
    </div>

    <script>
        // 假資料
        const groupData = {
            id: "abc123",
            title: "午餐便當揪團",
            menuImage: "/image/breakfast_menu.jpg",
            qrImage: "/image/fakeQrcode.jpg",
            orders: [
                { name: "小明", item: "雞腿飯", price: 85, note: "不要辣" },
                { name: "小華", item: "牛肉麵", price: 90, note: "少油" },
                { name: "小華", item: "牛肉麵", price: 90, note: "加辣" },
                { name: "小美", item: "排骨飯", price: 75, note: "去骨" }
            ]
        };

        // 初始化畫面
        document.addEventListener("DOMContentLoaded", () => {
            document.getElementById("group-title").textContent = groupData.title;
            document.getElementById("menu-image").src = groupData.menuImage;
            document.getElementById("qr-image").src = groupData.qrImage;

            renderOrderList();
        });

        // 表單送出處理
        document.getElementById("order-form").addEventListener("submit", function (e) {
            e.preventDefault();

            const name = document.getElementById("name").value.trim();
            const item = document.getElementById("item").value.trim();
            const price = parseInt(document.getElementById("price").value);
            const note = document.getElementById("note").value.trim();

            if (name && item && price > 0) {
                groupData.orders.push({ name, item, price, note });
                renderOrderList();
                this.reset();
                alert("填單成功！");
            } else {
                alert("請填寫完整資料！");
            }
        });

        // 渲染已填單名單
        function renderOrderList() {
            const list = document.getElementById("order-list");
            list.innerHTML = "";
            groupData.orders.forEach(order => {
                const li = document.createElement("li");
                li.className = "list-group-item d-flex justify-content-between";
                li.innerHTML = `<span>${order.name} - ${order.item}</span><small class="text-muted">${order.note}</small><strong>$${order.price}</strong>`;
                list.appendChild(li);
            });
        }
    </script>
</body>

</html>